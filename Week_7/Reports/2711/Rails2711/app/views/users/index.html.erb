<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-8">
        <%= search_form_for @q, html: { class: 'form-inline' } do |f| %>
          <div class="form-group">
            <%= f.label 'Search with age and email', class: 'mr-2' %>
            <%= f.search_field :age_or_email_cont, class: 'form-control mr-2' %>
          </div>
          <div class="form-group">
            <%= f.label :updated_at_gt, "Ngay bat dau", class: 'mr-2' %>
            <%= f.date_field :updated_at_gt, class: 'form-control mr-2' %>
          </div>
          
          <div class="form-group">
            <%= f.label :updated_at_lt, "Ngay ket thuc", class: 'mr-2' %>
            <%= f.date_field :updated_at_lt, class: 'form-control mr-2' %>
          </div>

          <%= f.submit 'Search', class: ' d-flex btn btn-primary mx-auto mt-3' %>
        <% end %>
    </div>
  </div>
</div>

<%= link_to 'Add user', new_user_path, class: 'btn btn-success mt-3 right-align text-right mb-3  ' %>

<table class="table table-striped table-dark">
  <thead class="thead-dark">
    <tr>
      <th scope="col">
        <%= sort_link(@q, :id, 'ID') %>
      </th>
      <th scope="col">
        <%= sort_link(@q, :name, "Name") %>
      </th>
      <th scope="col">
        <%= sort_link(@q, :age, 'Age') %>
      </th>
      <th scope="col">
        <%= sort_link(@q, :email, 'Email') %>
      </th>
      <th scope="col">
        <%= sort_link(@q, :created_at, 'Created') %>
      </th>
      <th scope="col">
        <%= sort_link(@q, :updated_at, 'Updated') %>
      </th>

      <th scope="col" class="text-center">Manage</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.id %></td>
        <td><%= user.name %></td>
        <td><%= user.age %></td>
        <td><%= user.email %></td>
        <td><%= user.created_at.strftime("%d %m %Y") %></td>
        <td><%= user.updated_at.strftime("%d %m %Y") %></td>
        <td>
          <div class="btn-group d-flex" role="group" aria-label="Actions">
            <%= link_to user_path(user.id), class: "btn btn-sm btn-primary" do %>
              View User
            <% end %>
            <%= link_to edit_user_path(user.id), class: "btn btn-sm btn-secondary" do %>
              Edit User
            <% end %>
            <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">
              Delete User
            </button>
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5 text-primary" id="exampleModalLabel">Delete User</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body text-secondary">
                    Ban co chac la muon xoa khong ?
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
                    <%= button_to user_path(user.id), method: :delete, class: 'btn btn-secondary btn-danger delete-btn' do %>
                      Yes
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
        </td>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>
<div class="d-flex justify-content-center">
  <%== pagy_bootstrap_nav(@pagy) %>
</div>
